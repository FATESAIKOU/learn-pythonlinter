# learn-pythonlinter

## 1. Project Purpose

This project is designed for learning how to use Python linters, both by running them manually and by integrating them with pre-commit hooks for automatic code checking and fixing. The project is based on a minimal FastAPI web application and demonstrates best practices for Python project management using `uv` (without directly using `uv pip`).

## 2. Project Structure

```
learn-pythonlinter/
├── .gitignore
├── .pre-commit-config.yaml   # Pre-commit hook configuration for Ruff
├── pyproject.toml            # Project metadata and dependencies (FastAPI, Ruff, pre-commit, uvicorn)
├── README.md
├── src/
│   └── main.py               # Minimal FastAPI app
├── uv.lock                   # uv dependency lock file
```

- `src/main.py`: The main FastAPI application.
- `.pre-commit-config.yaml`: Configures Ruff linter and formatter to run automatically on commit.
- `pyproject.toml`: Declares dependencies and linter configuration.
- `uv.lock`: Dependency lock file generated by `uv`.

## 3. Usage Guide

### Initalize Project
```
uv sync
```

### Manual Linter Execution

1. **Add an Antipattern for Testing**

   Edit `src/main.py` and add a simple linter antipattern, such as an unused import or a line exceeding the configured line length:

   ```python
   import os  # Unused import for linter test
   ```

2. **Run the Linter Manually**

   Use `uv` to run Ruff for linting and auto-fixing:

   ```sh
   uv run ruff check src/ --fix
   ```

   - To only check (without fixing):  
     `uv run ruff check src/`
   - To format code:  
     `uv run ruff format src/`

### Setting Up and Testing Pre-commit

1. **Install Pre-commit Hooks**

   ```sh
   uv run pre-commit install
   ```

2. **Test Pre-commit Hook**

   - Make a code change that violates a linter rule (e.g., add an unused import).
   - Stage the change:  
     `git add src/main.py`
   - Commit:  
     `git commit -m "Test pre-commit linter"`
   - The pre-commit hook will automatically run Ruff to check and fix issues before the commit is finalized.

### Running the FastAPI Application

To run the FastAPI application:

```sh
uv run uvicorn src.main:app --reload
```

The application will be available at `http://localhost:8000`.